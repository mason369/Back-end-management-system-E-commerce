{"version":3,"file":"js/773.f05d53ba.js","mappings":"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","sources":["webpack://Back-end-management-system-E-commerce/./src/components/power/Roles.vue","webpack://Back-end-management-system-E-commerce/src/components/power/Roles.vue","webpack://Back-end-management-system-E-commerce/./src/components/power/Roles.vue?fd0e","webpack://Back-end-management-system-E-commerce/./src/components/power/Roles.vue?a0df"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"角色管理\")]),_c('el-breadcrumb-item',[_vm._v(\"角色列表\")])],1),_c('br'),_c('el-card',[_c('el-row',[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"添加角色\")])],1),_c('br'),_c('el-table',{attrs:{\"data\":_vm.roleList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-form',{staticClass:\"demo-table-expand\",attrs:{\"label-position\":\"left\",\"inline\":\"\"}},_vm._l((scope.row.children),function(item1,i1){return _c('el-row',{key:item1.id,class:['bdbottom', i1 === 0 ? 'bdtop' : '', 'vcenter']},[_c('el-col',{attrs:{\"span\":5}},[_c('el-tag',{attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item1.id)}}},[_vm._v(\" \"+_vm._s(item1.authName))]),_c('i',{staticClass:\"el-icon-arrow-right\"})],1),_c('el-col',{attrs:{\"span\":19}},_vm._l((item1.children),function(item2,i2){return _c('el-row',{key:item2.id,class:[i2 === 0 ? '' : 'bdtop', 'vcenter']},[_c('el-col',{attrs:{\"span\":6}},[_c('el-tag',{attrs:{\"closable\":\"\",\"type\":\"success\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item2.id)}}},[_vm._v(\" \"+_vm._s(item2.authName))]),_c('i',{staticClass:\"el-icon-arrow-right\"})],1),_c('el-col',{attrs:{\"span\":18}},_vm._l((item2.children),function(item3){return _c('el-tag',{key:item3.id,attrs:{\"type\":\"warning\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item3.id)}}},[_vm._v(\" \"+_vm._s(item3.authName)+\" \")])}),1)],1)}),1)],1)}),1)]}}])}),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleDesc\",\"label\":\"角色描述\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showSetRightsDialog(scope.row)}}},[_vm._v(\"分配权限\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id + '')}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeUserById(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改角色\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event}}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.roleList,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\"}},[_c('el-input',{model:{value:(_vm.roleList.roleName),callback:function ($$v) {_vm.$set(_vm.roleList, \"roleName\", $$v)},expression:\"roleList.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\"}},[_c('el-input',{model:{value:(_vm.roleList.roleDesc),callback:function ($$v) {_vm.$set(_vm.roleList, \"roleDesc\", $$v)},expression:\"roleList.roleDesc\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editRole}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配权限\",\"visible\":_vm.setRightsDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRightsDialogVisible=$event},\"close\":_vm.setRightsDialogClose}},[_c('el-tree',{ref:\"treeRef\",attrs:{\"data\":_vm.rightsList,\"props\":_vm.treeProps,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":\"\",\"default-checked-keys\":_vm.defKeys}}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRightsDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.allotRights}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<!--面包屑导航-->\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\n\t\t\t<el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n\t\t\t<el-breadcrumb-item>角色管理</el-breadcrumb-item>\n\t\t\t<el-breadcrumb-item>角色列表</el-breadcrumb-item>\n\t\t</el-breadcrumb>\n\t\t<!--卡片视图区-->\n\t\t<br />\n\t\t<el-card>\n\t\t\t<el-row>\n\t\t\t\t<el-button type=\"primary\">添加角色</el-button>\n\t\t\t</el-row>\n\t\t\t<!--角色列表-->\n\t\t\t<br />\n\t\t\t<el-table :data=\"roleList\" border stripe>\n\t\t\t\t<el-table-column type=\"expand\">\n\t\t\t\t\t<!-- // 展开行模板 -->\n\t\t\t\t\t<template v-slot=\"scope\">\n\t\t\t\t\t\t<el-form label-position=\"left\" inline class=\"demo-table-expand\">\n\t\t\t\t\t\t\t<el-row\n\t\t\t\t\t\t\t\tv-for=\"(item1, i1) in scope.row.children\"\n\t\t\t\t\t\t\t\t:key=\"item1.id\"\n\t\t\t\t\t\t\t\t:class=\"['bdbottom', i1 === 0 ? 'bdtop' : '', 'vcenter']\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<!-- 一级权限 -->\n\t\t\t\t\t\t\t\t<el-col :span=\"5\">\n\t\t\t\t\t\t\t\t\t<el-tag\n\t\t\t\t\t\t\t\t\t\tclosable\n\t\t\t\t\t\t\t\t\t\t@close=\"removeRightById(scope.row, item1.id)\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ item1.authName }}</el-tag\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i class=\"el-icon-arrow-right\"></i>\n\t\t\t\t\t\t\t\t</el-col>\n\n\t\t\t\t\t\t\t\t<!-- 二、三级权限 -->\n\t\t\t\t\t\t\t\t<el-col :span=\"19\">\n\t\t\t\t\t\t\t\t\t<el-row\n\t\t\t\t\t\t\t\t\t\tv-for=\"(item2, i2) in item1.children\"\n\t\t\t\t\t\t\t\t\t\t:key=\"item2.id\"\n\t\t\t\t\t\t\t\t\t\t:class=\"[i2 === 0 ? '' : 'bdtop', 'vcenter']\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<el-col :span=\"6\">\n\t\t\t\t\t\t\t\t\t\t\t<el-tag\n\t\t\t\t\t\t\t\t\t\t\t\tclosable\n\t\t\t\t\t\t\t\t\t\t\t\t@close=\"removeRightById(scope.row, item2.id)\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"success\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item2.authName }}</el-tag\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-arrow-right\"></i>\n\t\t\t\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t\t\t\t<el-col :span=\"18\">\n\t\t\t\t\t\t\t\t\t\t\t<el-tag\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"warning\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"item3 in item2.children\"\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"item3.id\"\n\t\t\t\t\t\t\t\t\t\t\t\tclosable\n\t\t\t\t\t\t\t\t\t\t\t\t@close=\"removeRightById(scope.row, item3.id)\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item3.authName }}\n\t\t\t\t\t\t\t\t\t\t\t</el-tag>\n\t\t\t\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t\t\t</el-row>\n\t\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t</el-row>\n\t\t\t\t\t\t</el-form>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<!-- 索引列 -->\n\t\t\t\t<el-table-column prop=\"id\" label=\"ID\" width=\"100\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"roleName\" label=\"角色名称\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"roleDesc\" label=\"角色描述\"></el-table-column>\n\t\t\t\t<el-table-column label=\"操作\" width=\"180\">\n\t\t\t\t\t<template v-slot=\"scope\">\n\t\t\t\t\t\t<el-button\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t@click=\"showSetRightsDialog(scope.row)\"\n\t\t\t\t\t\t\t>分配权限</el-button\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<el-button\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t@click=\"showEditDialog(scope.row.id + '')\"\n\t\t\t\t\t\t\t>编辑</el-button\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<el-button\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t@click=\"removeUserById(scope.row.id)\"\n\t\t\t\t\t\t\t>删除</el-button\n\t\t\t\t\t\t>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t</el-table>\n\t\t</el-card>\n\t\t<!-- //修改角色对话框 -->\n\t\t<el-dialog title=\"修改角色\" :visible.sync=\"editDialogVisible\" width=\"50%\">\n\t\t\t<el-form ref=\"editForm\" :model=\"roleList\" label-width=\"80px\">\n\t\t\t\t<el-form-item label=\"角色名称\">\n\t\t\t\t\t<el-input v-model=\"roleList.roleName\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"角色描述\">\n\t\t\t\t\t<el-input v-model=\"roleList.roleDesc\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"editDialogVisible = false\">取 消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"editRole\">确 定</el-button>\n\t\t\t</span>\n\t\t</el-dialog>\n\t\t<!-- //分配权限对话框 -->\n\t\t<el-dialog\n\t\t\ttitle=\"分配权限\"\n\t\t\t:visible.sync=\"setRightsDialogVisible\"\n\t\t\twidth=\"50%\"\n\t\t\t@close=\"setRightsDialogClose\"\n\t\t>\n\t\t\t<!-- 树形 -->\n\t\t\t<el-tree\n\t\t\t\tref=\"treeRef\"\n\t\t\t\t:data=\"rightsList\"\n\t\t\t\t:props=\"treeProps\"\n\t\t\t\tshow-checkbox\n\t\t\t\tnode-key=\"id\"\n\t\t\t\tdefault-expand-all\n\t\t\t\t:default-checked-keys=\"defKeys\"\n\t\t\t></el-tree>\n\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"setRightsDialogVisible = false\">取 消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"allotRights\">确 定</el-button>\n\t\t\t</span>\n\t\t</el-dialog>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t//控制对话框的显示与隐藏\n\t\t\tsetRightsDialogVisible: false,\n\t\t\t//角色列表数据\n\t\t\troleList              : [],\n\t\t\t//修改角色框的显示与隐藏\n\t\t\teditDialogVisible     : false,\n\t\t\t//所有权限列表\n\t\t\trightsList            : [],\n\t\t\t//树形控件的配置\n\t\t\ttreeProps             : {\n\t\t\t\tlabel   : \"authName\",\n\t\t\t\tchildren: \"children\"\n\t\t\t},\n\t\t\t//默认选中的权限\n\t\t\tdefKeys: [],\n\t\t\t//分配权限的角色id\n\t\t\troleId : \"\"\n\t\t};\n\t},\n\tcreated() {\n\t\t//获取角色列表数据\n\t\tthis.getRoleList();\n\t},\n\tmethods: {\n\t\t//获取角色列表数据\n\t\tasync getRoleList() {\n\t\t\t//发送请求\n\t\t\tconst { data: res } = await this.$http.get(\"roles\");\n\t\t\t//判断是否获取成功\n\t\t\tif (res.meta.status !== 200) {\n\t\t\t\treturn this.$message.error(\"获取角色列表失败\");\n\t\t\t}\n\t\t\t//获取成功\n\t\t\tthis.roleList = res.data;\n\t\t},\n\n\t\t//删除角色\n\t\tasync removeUserById(id) {\n\t\t\t//提示用户是否删除\n\t\t\tconst confirmResult = await this.$confirm(\n\t\t\t\t\"此操作将永久删除该角色, 是否继续?\",\n\t\t\t\t\"提示\",\n\t\t\t\t{\n\t\t\t\t\tconfirmButtonText: \"确定\",\n\t\t\t\t\tcancelButtonText : \"取消\",\n\t\t\t\t\ttype             : \"warning\"\n\t\t\t\t}\n\t\t\t);\n\t\t\t//判断用户是否点击了取消按钮\n\t\t\tif (confirmResult === \"cancel\") {\n\t\t\t\treturn this.$message.info(\"已取消删除\");\n\t\t\t}\n\t\t\t//发送请求\n\t\t\tconst { data: res } = await this.$http.delete(`roles/${id}`);\n\t\t\t//判断是否删除成功\n\t\t\tif (res.meta.status !== 200) {\n\t\t\t\treturn this.$message.error(\"删除角色失败\");\n\t\t\t}\n\t\t\t//删除成功\n\t\t\tthis.$message.success(\"删除角色成功\");\n\t\t\t//重新获取角色列表数据\n\t\t\tawait this.getRoleList();\n\t\t},\n\t\t//展示修改角色对话框\n\t\tasync showEditDialog(id) {\n\t\t\t//发送请求\n\t\t\tconst { data: res } = await this.$http.get(`roles/${id}`);\n\t\t\t//判断是否获取成功\n\t\t\tif (res.meta.status !== 200) {\n\t\t\t\treturn this.$message.error(\"获取角色信息失败\");\n\t\t\t}\n\t\t\t//获取成功\n\t\t\tthis.roleList = res.data;\n\t\t\t//显示修改角色对话框\n\t\t\tthis.editDialogVisible = true;\n\t\t},\n\t\t//修改角色信息并提交\n\t\tasync editRole() {\n\t\t\t//获取表单数据\n\t\t\tconst { roleName, roleDesc } = this.roleList;\n\t\t\t//发送请求\n\t\t\tconst { data: res } = await this.$http.put(`roles/${this.roleList.id}`, {\n\t\t\t\troleName,\n\t\t\t\troleDesc\n\t\t\t});\n\t\t\t//判断是否修改成功\n\t\t\tif (res.meta.status !== 200) {\n\t\t\t\treturn this.$message.error(res.meta.msg);\n\t\t\t}\n\t\t\t//修改成功\n\t\t\tthis.$message.success(\"修改角色信息成功\");\n\t\t\t//关闭对话框\n\t\t\tthis.editDialogVisible = false;\n\t\t\t//重新获取角色列表数据\n\t\t\tawait this.getRoleList();\n\t\t},\n\t\t//根据id删除对应的权限\n\t\tasync removeRightById(role, rightId) {\n\t\t\t//弹窗提示用户是否删除\n\t\t\tconst confirmResult = await this.$confirm(\n\t\t\t\t\"此操作将永久删除该文件, 是否继续?\",\n\t\t\t\t\"提示\",\n\t\t\t\t{\n\t\t\t\t\tconfirmButtonText: \"确定\",\n\t\t\t\t\tcancelButtonText : \"取消\",\n\t\t\t\t\ttype             : \"warning\"\n\t\t\t\t}\n\t\t\t).catch((err) => err);\n\t\t\t//判断用户是否点击了取消按钮\n\t\t\tif (confirmResult !== \"confirm\") {\n\t\t\t\treturn this.$message.info(\"已取消删除\");\n\t\t\t}\n\t\t\t//发送请求\n\t\t\tconst { data: res } = await this.$http.delete(\n\t\t\t\t`roles/${role.id}/rights/${rightId}`\n\t\t\t);\n\t\t\t//判断是否删除成功\n\t\t\tif (res.meta.status !== 200) {\n\t\t\t\treturn this.$message.error(\"删除权限失败\");\n\t\t\t}\n\t\t\t//删除成功\n\t\t\tthis.$message.success(\"删除权限成功\");\n\t\t\t//重新获取角色列表数据\n\t\t\trole.children = res.data;\n\t\t},\n\t\t//展示分配权限对话框\n\t\tasync showSetRightsDialog(role) {\n\t\t\tthis.roleId = role.id;\n\t\t\t//发送请求\n\t\t\tconst { data: res } = await this.$http.get(\"rights/tree\");\n\t\t\t//判断是否获取成功\n\t\t\tif (res.meta.status !== 200) {\n\t\t\t\treturn this.$message.error(\"获取权限列表失败\");\n\t\t\t}\n\t\t\t//获取成功\n\t\t\tthis.rightsList = res.data;\n\n\t\t\t//获取当前角色已经拥有的权限\n\t\t\tthis.getDefKeys(role, this.defKeys);\n\n\t\t\t//展示分配权限对话框\n\t\t\tthis.setRightsDialogVisible = true;\n\t\t},\n\t\t//通过递归的形式，获取角色下所有三级权限的id，并保存到 defKeys数组中\n\t\tgetDefKeys(node, arr) {\n\t\t\tif (!node.children) {\n\t\t\t\treturn arr.push(node.id);\n\t\t\t}\n\t\t\tnode.children.forEach((item) => {\n\t\t\t\tthis.getDefKeys(item, arr);\n\t\t\t});\n\t\t},\n\t\t// 分配权限关闭\n\t\tsetRightsDialogClose() {\n\t\t\t//清空默认选中的权限\n\t\t\tthis.defKeys = [];\n\t\t},\n\t\t//点击为角色分配权限\n\t\tasync allotRights() {\n\t\t\tconst keys = [\n\t\t\t\t...this.$refs.treeRef.getCheckedKeys(),\n\t\t\t\t...this.$refs.treeRef.getHalfCheckedKeys()\n\t\t\t];\n\t\t\tconst idStr = keys.join(\",\");\n\t\t\t//发送请求\n\t\t\tconst { data: res } = await this.$http.post(\n\t\t\t\t`roles/${this.roleId}/rights`,\n\t\t\t\t{ rids: idStr }\n\t\t\t);\n\t\t\t//判断是否分配成功\n\t\t\tif (res.meta.status !== 200) {\n\t\t\t\treturn this.$message.error(\"分配权限失败\");\n\t\t\t}\n\t\t\t//分配成功\n\t\t\tthis.$message.success(\"分配权限成功\");\n\t\t\t//关闭对话框\n\t\t\tthis.setRightsDialogVisible = false;\n\t\t\t//重新获取角色列表数据\n\t\t\tawait this.getRoleList();\n\t\t}\n\t}\n};\n</script>\n\n<style scoped lang=\"scss\">\n.el-tag {\n\tmargin: 7px 7px 7px 30px;\n}\n.bdtop {\n\tborder-top: 1px solid #eee;\n}\n.bdbottom {\n\tborder-bottom: 1px solid #eee;\n}\n.vcenter {\n\tdisplay: flex;\n\talign-items: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Roles.vue?vue&type=template&id=8224feb4&scoped=true&\"\nimport script from \"./Roles.vue?vue&type=script&lang=js&\"\nexport * from \"./Roles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Roles.vue?vue&type=style&index=0&id=8224feb4&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8224feb4\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","path","_v","roleList","scopedSlots","_u","key","fn","scope","staticClass","_l","row","children","item1","i1","id","class","on","$event","removeRightById","_s","authName","item2","i2","item3","showSetRightsDialog","showEditDialog","removeUserById","editDialogVisible","ref","model","value","roleName","callback","$$v","$set","expression","roleDesc","slot","editRole","setRightsDialogVisible","setRightsDialogClose","rightsList","treeProps","defKeys","allotRights","staticRenderFns","data","label","roleId","created","methods","confirmButtonText","cancelButtonText","type","role","getDefKeys","node","rids","component"],"sourceRoot":""}